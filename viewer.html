<!DOCTYPE html>
<html lang="ro">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Rapsodia – Document</title>
  <style>
    html, body { margin: 0; padding: 0; height: 100%; font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, sans-serif; }
    header {
      display: flex; align-items: center; justify-content: space-between;
      padding: 10px; background: #0b57d0; color: #fff;
    }
    header h1 { font-size: 16px; margin: 0; font-weight: 600; }
    header .actions { display: flex; gap: 8px; align-items: center; }
    a.button {
      color: #fff; text-decoration: none; border: 1px solid rgba(255,255,255,.6);
      padding: 6px 10px; border-radius: 10px;
    }
    #toolbar {
      display: flex; gap: 8px; align-items: center;
      padding: 8px 10px; border-bottom: 1px solid #eee; background:#fafafa;
    }
    #toolbar button {
      padding: 6px 10px; border-radius: 8px; border: 1px solid #ddd; background: #fff; cursor: pointer;
    }
    #toolbar span { min-width: 60px; text-align: center; }
    #viewer {
      height: calc(100% - 50px - 46px); /* header + toolbar */
      overflow: auto; background: #eee; padding: 10px;
    }
    canvas {
      display: block; margin: 0 auto 20px; background: #fff;
      box-shadow: 0 0 4px rgba(0,0,0,.2);
      width: 100%; height: auto; max-width: 900px;
    }
  </style>
</head>
<body>
  <header>
    <h1>Rapsodia Realităților – Octombrie 2025</h1>
    <div class="actions">
      <a class="button" href="index.html">Înapoi</a>
      <a class="button" href="rapsodia-realitatilor-2025-octombrie.pdf" download>Descarcă PDF</a>
    </div>
  </header>

  <!-- Mini-toolbar pentru zoom/pagină -->
  <div id="toolbar">
    <button id="zoomOut">-</button>
    <span id="zoomLabel">100%</span>
    <button id="zoomIn">+</button>
  </div>

  <div id="viewer"></div>

  <!-- PDF.js din CDN -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
  <script>
    const PDF_URL = "rapsodia-realitatilor-2025-octombrie.pdf";
    const container = document.getElementById("viewer");
    const zoomInBtn = document.getElementById("zoomIn");
    const zoomOutBtn = document.getElementById("zoomOut");
    const zoomLabel = document.getElementById("zoomLabel");

    // Config PDF.js
    pdfjsLib.GlobalWorkerOptions.workerSrc =
      "https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js";

    let pdfDoc = null;
    let scale = 1.25; // zoom inițial (125%)
    let pages = [];

    async function renderPage(pageNum) {
      const page = await pdfDoc.getPage(pageNum);
      const viewport = page.getViewport({ scale });
      let canvas = pages[pageNum];
      if (!canvas) {
        canvas = document.createElement("canvas");
        pages[pageNum] = canvas;
        container.appendChild(canvas);
      }
      const context = canvas.getContext("2d");
      canvas.width = Math.floor(viewport.width);
      canvas.height = Math.floor(viewport.height);
      await page.render({ canvasContext: context, viewport }).promise;
    }

    async function renderAllPages() {
      container.innerHTML = "";
      pages = [];
      for (let i = 1; i <= pdfDoc.numPages; i++) {
        await renderPage(i);
      }
    }

    function updateZoomLabel() {
      zoomLabel.textContent = Math.round(scale * 100) + "%";
    }

    zoomInBtn.addEventListener("click", async () => {
      scale = Math.min(scale + 0.25, 3);
      updateZoomLabel();
      await renderAllPages();
    });

    zoomOutBtn.addEventListener("click", async () => {
      scale = Math.max(scale - 0.25, 0.5);
      updateZoomLabel();
      await renderAllPages();
    });

    (async function init() {
      pdfDoc = await pdfjsLib.getDocument(PDF_URL).promise;
      updateZoomLabel();
      await renderAllPages();
    })();
  </script>
</body>
</html>
